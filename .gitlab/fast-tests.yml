###################################### E2E Tests ######################################
.e2e-tests-parallel:
  extends:
    - .fast-tests
    - .parallel-e2e-tests
  image: ${IMAGE_JS_PAYMENTS_TESTS}

.e2e-tests-sequentially:
  extends:
    - .fast-tests
    - .sequentially-tests
  image: ${IMAGE_JS_PAYMENTS_TESTS}

# Card Payments E2E Tests Headless
card-payments-e2e-tests-review:
  extends:
    - .e2e-tests-parallel
    - .services-app-html-review
    - .rules-when-review
  variables:
    FEATURE_FILES_DIR: 'features/e2e_tests'
    FEATURE_FILES_NAMES_CONTAINS: 'e2e_'
  parallel: 20

card-payments-e2e-tests-app-html-release:
  extends:
    - .e2e-tests-parallel
    - .service-app-html-release-merchant
    - .rules-when-release
  variables:
    FEATURE_FILES_DIR: 'features/e2e_tests'
  parallel: 20

# Cardinal Commerce E2E Tests Headless
cardinal-commerce-e2e-tests-app-html-review:
  extends:
    - .e2e-tests-parallel
    - .services-app-html-review
    - .rules-when-review
  variables:
    FEATURE_FILES_DIR: 'features/e2e_tests/e2e_cardinal_commerce'
  parallel: 8

cardinal-commerce-e2e-tests-app-html-release:
  extends:
    - .e2e-tests-parallel
    - .service-app-html-release-merchant
    - .rules-when-release
  variables:
    FEATURE_FILES_DIR: 'features/e2e_tests/e2e_cardinal_commerce'
  parallel: 8

# this is on purpose - STJS-1678
cardinal-commerce-timeout-e2e-tests-app-html-release:
  extends:
    - .e2e-tests-parallel
    - .service-app-html-release-merchant
    - .rules-when-release
  variables:
    FEATURE_FILES_DIR: 'features/e2e_tests/e2e_cardinal_commerce/e2e_timeout'
  parallel: 8

# Merchants features E2E Tests Headless
merchants-features-e2e-tests-app-html-review:
  extends:
    - .e2e-tests-parallel
    - .services-app-html-review
    - .rules-when-review
  variables:
    FEATURE_FILES_DIR: 'features/e2e_tests/e2e_merchants_requests'
  parallel: 6

merchants-features-e2e-tests-app-html-release:
  extends:
    - .e2e-tests-parallel
    - .service-app-html-release-merchant
    - .rules-when-release
  variables:
    FEATURE_FILES_DIR: 'features/e2e_tests/e2e_merchants_requests'
  parallel: 6

# Smoke E2E Tests Headless
smoke-e2e-tests-app-html-review:
  extends:
    - .e2e-tests-parallel
    - .services-app-html-review
    - .rules-when-review
  variables:
    FEATURE_FILES_DIR: 'features/e2e_tests/e2e_smoke_tests'
  parallel: 3

smoke-e2e-tests-app-html-release:
  extends:
    - .e2e-tests-parallel
    - .service-app-html-release-merchant
    - .rules-when-release
  variables:
    FEATURE_FILES_DIR: 'features/e2e_tests/e2e_smoke_tests'
  parallel: 3

################################### Component Tests ###################################
.component-app-html-mock:
  extends:
    - .fast-tests
    - .services-app-html-mock
  image: ${IMAGE_JS_PAYMENTS_TESTS}

.card-payments-component-tests:
  extends:
    - .component-app-html-mock
    - .parallel-component-tests
  variables:
    FEATURE_FILES_DIR: 'features/component_tests'
  parallel: 21

card-payments-component-tests-review:
  extends:
    - .card-payments-component-tests
    - .rules-when-review

card-payments-component-tests-release:
  extends:
    - .card-payments-component-tests
    - .rules-when-release

.visa-checkout-component-tests:
  extends:
    - .component-app-html-mock
    - .sequentially-component-tests
  variables:
    FEATURE_FILE_NAME: 'visa_checkout.feature'

visa-checkout-component-tests-review:
  extends:
    - .visa-checkout-component-tests
    - .rules-when-review

visa-checkout-component-tests-release:
  extends:
    - .visa-checkout-component-tests
    - .rules-when-release
