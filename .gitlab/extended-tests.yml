### About resource_group
# Browserstack allow us to run 5 parallel jobs, so we need to limit executing browserstack jobs to max 5 in the same time
# Even if Browserstack jobs from fast-tests will be ran, then we still have Queue (5), so it should not be an issue.
# Resource groups - https://docs.gitlab.com/ee/ci/yaml/#resource_group
# We will have 5 resource groups for review release: extended_tests_1 - ... - extended_tests_4, extended_tests_5
# It will assure that we won't use more than 5 parallel extended Browserstack tests jobs.

################################### Component Tests Browserstack ###################################
.component-tests-browserstack:
  extends:
    - .extended-tests
    - .services-app-html-mock
    - .sequentially-component-browserstack-tests
  image: ${IMAGE_JS_PAYMENTS_TESTS}

.apple-pay-component-tests-browserstack:
  extends:
    - .component-tests-browserstack
    - .rules-extended-tests-always
  variables:
    OS: "OS X"
    OS_VERSION: Big Sur
    BROWSER: Safari
    BROWSER_VERSION: 'latest'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'

apple-pay-component-tests-part-1:
  extends: .apple-pay-component-tests-browserstack
  variables:
    POETRY_TAGS: apple_test_part1
  resource_group: extended_tests_1

apple-pay-component-tests-part-2:
  extends: .apple-pay-component-tests-browserstack
  variables:
    POETRY_TAGS: apple_test_part2
  resource_group: extended_tests_2

.iPhone8-11.0-component-tests-smoke:
  extends:
    - .component-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 8
    OS_VERSION: 11
    BROWSER: Safari
    REAL_MOBILE: 'true'
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_3

.iPhoneXS-12-component-tests-smoke:
  extends:
    - .component-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone XS
    OS_VERSION: 12
    BROWSER: Safari
    REAL_MOBILE: 'true'
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_4

.iPhone11-13-component-tests-smoke:
  extends:
    - .component-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 11
    OS_VERSION: 13
    REAL_MOBILE: 'true'
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_5

.iPhone11-14.0-component-tests-smoke:
  extends:
    - .component-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 11
    OS_VERSION: 14
    BROWSER: Safari
    REAL_MOBILE: 'true'
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_1


################################### E2E Tests Browserstack ###################################
.e2e-tests-browserstack-release:
  extends:
    - .extended-tests
    - .service-app-html-release-merchant
    - .sequentially-e2e-browserstack-tests
  image: ${IMAGE_JS_PAYMENTS_TESTS}

SamsungGalaxyS6-5.0-browser-not-supported-e2e-tests:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S6
    OS_VERSION: '5.0'
    REAL_MOBILE: 'true'
    POETRY_TAGS: browser_info_not_supported
  resource_group: extended_tests_1

# E2E Smoke Tests
win10-Chrome-latest-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: '8.1'
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_2

.win8.1-Chrome-almost-latest-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: '8.1'
    BROWSER: Chrome
    BROWSER_VERSION: 'latest-1'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_3

win10-IE-11.0-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: IE
    BROWSER_VERSION: '11.0'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_2

win8.1-Edge-latest-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: '8.1'
    BROWSER: Edge
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_3

.win8.1-Edge-almost-latest-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: '8.1'
    BROWSER: Edge
    BROWSER_VERSION: 'latest-1'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_4

win10-Firefox-latest-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Firefox
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_5

.win10-Firefox-almost-latest-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Firefox
    BROWSER_VERSION: 'latest-1'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_1

.OSXBigSur-Chrome-latest-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Big Sur
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_2

.OSXBigSur-Firefox-latest-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Big Sur
    BROWSER: Firefox
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_3

.OSXCatalina-Safari-13.1-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Catalina
    BROWSER: Safari
    BROWSER_VERSION: '13.1'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_4

.OSXBigSur-Safari-14.0-e2e-tests-smoke:
  extends:
    - .e2e-tests-browserstack-release
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Big Sur
    BROWSER: Safari
    BROWSER_VERSION: '14.0'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_5


################################### Visual E2E Tests Browserstack ###################################
.visual-regression-tests-review:
  extends:
    - .extended-tests
    - .services-app-html-review
    - .sequentially-e2e-browserstack-tests
  image: ${IMAGE_JS_PAYMENTS_TESTS}

.visual-regression-tests-release:
  extends:
    - .extended-tests
    - .service-app-html-release-merchant
    - .sequentially-e2e-browserstack-tests
  image: ${IMAGE_JS_PAYMENTS_TESTS}

.SamsungGalaxyS20-10.0-visual-tests:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S20
    OS_VERSION: '10.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.2'
    POETRY_TAGS: $VISUAL_TESTS_TAG
  resource_group: extended_tests_1

.SamsungGalaxyS20-10.0-visual-tests-styling:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S20
    OS_VERSION: '10.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.0'
    POETRY_TAGS: $VISUAL_STYLING_TESTS_TAG
  resource_group: extended_tests_2

.win10-IE-11.0-visual-tests:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: IE
    BROWSER_VERSION: '11.0'
    POETRY_TAGS: $VISUAL_TESTS_TAG_STJS_1709
  resource_group: extended_tests_3

.win10-IE-11.0-visual-tests-styling:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: IE
    BROWSER_VERSION: '11.0'
    POETRY_TAGS: $VISUAL_STYLING_TESTS_TAG_STJS_1709
  resource_group: extended_tests_5

win10-Chrome-latest-visual-tests-release:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $VISUAL_TESTS_TAG
  resource_group: extended_tests_4

win10-Chrome-latest-visual-tests-styling-release:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $VISUAL_STYLING_TESTS_TAG
  resource_group: extended_tests_5

win10-Chrome-latest-visual-tests-review:
  extends:
    - .visual-regression-tests-review
    - .rules-extended-tests-review
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $VISUAL_TESTS_TAG
  resource_group: extended_tests_4

win10-Chrome-latest-visual-tests-styling-review:
  extends:
    - .visual-regression-tests-review
    - .rules-extended-tests-review
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $VISUAL_STYLING_TESTS_TAG
  resource_group: extended_tests_5

# E2E Smoke Tests
.SamsungGalaxyS8-7.0-e2e-tests-smoke:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S8
    OS_VERSION: '7.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.14.0'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_1

.SamsungGalaxyS9-8.0-e2e-tests-smoke:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S9
    OS_VERSION: '8.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.2'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_2

.SamsungGalaxyS10Plus-9.0-e2e-tests-smoke:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S10 Plus
    OS_VERSION: '9.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.0'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_3

.SamsungGalaxyS20-10.0-e2e-tests-smoke:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S20
    OS_VERSION: '10.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.0'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_4

GooglePixel4-10.0-e2e-tests-smoke:
  extends:
    - .visual-regression-tests-release
    - .rules-extended-tests-release
  variables:
    DEVICE: Google Pixel 4
    OS_VERSION: '10.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.0'
    POETRY_TAGS: $SMOKE_E2E_TESTS_TAG
  resource_group: extended_tests_5


################################### Visual Component Tests Browserstack ###################################
.iPhone12Mini-14-visual-tests:
  extends:
    - .component-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 12 Mini
    OS_VERSION: 14
    BROWSER: Safari
    REAL_MOBILE: 'true'
    POETRY_TAGS: $VISUAL_TESTS_SAFARI_TAG
  resource_group: extended_tests_1

.OSXBigSur-Safari-14.0-visual-tests:
  extends:
    - .component-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Big Sur
    BROWSER: Safari
    BROWSER_VERSION: '14.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $VISUAL_TESTS_SAFARI_TAG
  resource_group: extended_tests_2

.iPhone12Mini-14-visual-tests-styling:
  extends:
    - .component-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 12 Mini
    OS_VERSION: 14
    BROWSER: Safari
    REAL_MOBILE: 'true'
    POETRY_TAGS: $VISUAL_STYLING_TESTS_SAFARI_TAG
  resource_group: extended_tests_3

.OSXBigSur-Safari-14.0-visual-tests-styling:
  extends:
    - .component-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Big Sur
    BROWSER: Safari
    BROWSER_VERSION: '14.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $VISUAL_STYLING_TESTS_SAFARI_TAG
  resource_group: extended_tests_4

