### About resource_group
# Browserstack allow us to run 5 parallel jobs, so we need to limit executing browserstack jobs to max 5 in the same time
# Even if Browserstack jobs from fast-tests will be ran, then we still have Queue (5), so it should not be an issue.
# Resource groups - https://docs.gitlab.com/ee/ci/yaml/#resource_group
# We will have 4 resource groups for review and 4 for release: extended_tests_release_1 - ... - extended_tests_release_4, extended_tests_review_1 - ... - extended_tests_review_4
# It will assure that we won't use more than 5 parallel extended Browserstack tests jobs.
.extended-tests-browserstack:
  extends:
    - .extended-tests
    - .services-app-html-test
    - .sequentially-component-browserstack-tests
  image: ${IMAGE_JS_PAYMENTS_TESTS}

.visual-regression-tests:
  extends:
    - .extended-tests
    - .services-app-html-dev
    - .sequentially-e2e-browserstack-tests
  image: ${IMAGE_JS_PAYMENTS_TESTS}

# smoke tests executed on review branches
.OSX-Mojave_Safari-12.1-browserstack-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-always
  variables:
    OS: "OS X"
    OS_VERSION: Mojave
    BROWSER: Safari
    BROWSER_VERSION: '12.1'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'

OSX-Mojave_Safari-12.1-part-1-browserstack-component-tests:
  extends: .OSX-Mojave_Safari-12.1-browserstack-component-tests
  variables:
    POETRY_TAGS: apple_test_part1
  resource_group: extended_tests_review_1

OSX-Mojave_Safari-12.1-part-2-browserstack-component-tests:
  extends: .OSX-Mojave_Safari-12.1-browserstack-component-tests
  variables:
    POETRY_TAGS: apple_test_part2
  resource_group: extended_tests_review_2

win10_Chrome-latest-visual-regression-tests:
  extends:
    - .visual-regression-tests
    - .rules-extended-tests-always
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: visual_regression
  resource_group: extended_tests_review_1

win10_Chrome-latest-visual-regression-tests-styling:
  extends:
    - .visual-regression-tests
    - .rules-extended-tests-always
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: visual_regression_styling
  resource_group: extended_tests_review_2

# smoke tests executed on master branch
OSX-Catalina_Safari-13.1_ApplePay-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Catalina
    BROWSER: Safari
    BROWSER_VERSION: '13.1'
    ROWSERSTACK_SAFARI_DRIVER: '2.48'
    BROWSERSTACK_SELENIUM_VERSION: '3.14.0'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_release_1

.iPhone11-14.0_Safari_ApplePay-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 11
    OS_VERSION: 14
    BROWSER: Safari
    REAL_MOBILE: 'true'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_release_2

SamsungGalaxyS20-10.0_Chrome-visual-regression-tests:
  extends:
    - .visual-regression-tests
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S20
    OS_VERSION: '10.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.2'
    POETRY_TAGS: visual_regression
  resource_group: extended_tests_release_2

iPhone12Mini-14_Safari-visual-regression-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 12 Mini
    OS_VERSION: 14
    BROWSER: Safari
    REAL_MOBILE: 'true'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: visual_regression_safari
  resource_group: extended_tests_release_3

OSX-BigSur_Safari-14.0-visual-regression-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Big Sur
    BROWSER: Safari
    BROWSER_VERSION: '14.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: visual_regression_safari
  resource_group: extended_tests_release_4

SamsungGalaxyS20-10.0_Chrome-visual-regression-tests-styling:
  extends:
    - .visual-regression-tests
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S20
    OS_VERSION: '10.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.0'
    POETRY_TAGS: visual_regression_styling
  resource_group: extended_tests_release_1

.iPhone8-11.0_Safari_ApplePay-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 8
    OS_VERSION: 11
    BROWSER: Safari
    REAL_MOBILE: 'true'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_release_3

win8.1_Chrome-latest-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: '8.1'
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    POETRY_TAGS: $SMOKE_TESTS_TAG
  resource_group: extended_tests_release_2

OSX-Catalina_Chrome-latest-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Catalina
    BROWSER: Chrome
    BROWSER_VERSION: 'latest'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $SMOKE_TESTS_TAG
  resource_group: extended_tests_release_3

OSX-Catalina_Firefox-latest-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Catalina
    BROWSER: Firefox
    BROWSER_VERSION: 'latest'
    BROWSERSTACK_FIREFOX_DRIVER: '0.27.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $SMOKE_TESTS_TAG
  resource_group: extended_tests_release_4

win10_Edge-latest-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Edge
    BROWSER_VERSION: 'latest'
    BROWSERSTACK_SELENIUM_VERSION: '3.14.0'
    POETRY_TAGS: $SMOKE_TESTS_TAG
  resource_group: extended_tests_release_1

win10_Edge-18.0-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Edge
    BROWSER_VERSION: '18.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    POETRY_TAGS: $SMOKE_TESTS_TAG
  resource_group: extended_tests_release_2

OSX-High-Sierra_Safari-11.1_ApplePay-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: High Sierra
    BROWSER: Safari
    BROWSER_VERSION: '11.1'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_release_3

.iPhoneXS-12_Safari-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone XS
    OS_VERSION: 12
    BROWSER: Safari
    REAL_MOBILE: 'true'
    POETRY_TAGS: $SMOKE_TESTS_TAG
    AUTOMATION_TIMEOUT: 120
  resource_group: extended_tests_release_2

iPhone11-13_Safari_ApplePay-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 11
    OS_VERSION: 13
    REAL_MOBILE: 'true'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_release_3

.iPhone7-10.0_Safari_ApplePay-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 7
    OS_VERSION: 10
    BROWSER: Safari
    REAL_MOBILE: 'true'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: $SMOKE_TESTS_WITH_APPLE_PAY
  resource_group: extended_tests_release_4

SamsungGalaxyS8-7.0_Chrome-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S8
    OS_VERSION: '7.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.14.0'
    POETRY_TAGS: $SMOKE_TESTS_TAG
  resource_group: extended_tests_release_4

SamsungGalaxyS10Plus-9.0_Chrome-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S10 Plus
    OS_VERSION: '9.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.0'
    POETRY_TAGS: $SMOKE_TESTS_TAG
  resource_group: extended_tests_release_1

GooglePixel4-10.0_Chrome-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: Google Pixel 4
    OS_VERSION: '10.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.0'
    POETRY_TAGS: $SMOKE_TESTS_TAG
  resource_group: extended_tests_release_2

win10_Firefox-latest-part-1-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Firefox
    BROWSER_VERSION: 'latest'
    BROWSERSTACK_FIREFOX_DRIVER: '0.27.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    POETRY_TAGS: extended_tests_part_1
  resource_group: extended_tests_release_3

win10_Firefox-latest-part-2-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Firefox
    BROWSER_VERSION: 'latest'
    BROWSERSTACK_FIREFOX_DRIVER: '0.27.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    POETRY_TAGS: extended_tests_part_2
  resource_group: extended_tests_release_4

win10_Firefox-latest-part-3-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: Firefox
    BROWSER_VERSION: 'latest'
    BROWSERSTACK_FIREFOX_DRIVER: '0.27.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    POETRY_TAGS: extended_tests_part_3
  resource_group: extended_tests_release_1

.iPhoneXS-12_Safari-ApplePay-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone XS
    OS_VERSION: 12
    BROWSER: Safari
    REAL_MOBILE: 'true'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: smoke_test_apple_pay
  resource_group: extended_tests_release_3

SamsungGalaxyS9-8.0_Chrome-part-1-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S9
    OS_VERSION: '8.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.2'
    POETRY_TAGS: extended_tests_part_1
  resource_group: extended_tests_release_2

SamsungGalaxyS9-8.0_Chrome-part-2-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S9
    OS_VERSION: '8.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.2'
    POETRY_TAGS: extended_tests_part_2
  resource_group: extended_tests_release_3

SamsungGalaxyS9-8.0_Chrome-part-3-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S9
    OS_VERSION: '8.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.2'
    POETRY_TAGS: extended_tests_part_3
  resource_group: extended_tests_release_4

win10_IE-11.0-part-1-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: IE
    BROWSER_VERSION: '11.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    POETRY_TAGS: extended_tests_part_1
  resource_group: extended_tests_release_1

win10_IE-11.0-part-2-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: IE
    BROWSER_VERSION: '11.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    POETRY_TAGS: extended_tests_part_2
  resource_group: extended_tests_release_2

win10_IE-11.0-part-3-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: IE
    BROWSER_VERSION: '11.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    POETRY_TAGS: extended_tests_part_3
  resource_group: extended_tests_release_3

OSX-Mojave_Safari-12.1-part-1-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Mojave
    BROWSER: Safari
    BROWSER_VERSION: '12.1'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: extended_tests_part_1
  resource_group: extended_tests_release_4

OSX-Mojave_Safari-12.1-part-2-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Mojave
    BROWSER: Safari
    BROWSER_VERSION: '12.1'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: extended_tests_part_2,extended_tests_apple_pay
  resource_group: extended_tests_release_1

OSX-Mojave_Safari-12.1-part-3-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Mojave
    BROWSER: Safari
    BROWSER_VERSION: '12.1'
    BROWSERSTACK_SAFARI_DRIVER: '2.48'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: extended_tests_part_3
  resource_group: extended_tests_release_2

iPhone12Mini-14_Safari-visual-regression-tests-styling:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone 12 Mini
    OS_VERSION: 14
    BROWSER: Safari
    REAL_MOBILE: 'true'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: visual_regression_styling_safari
  resource_group: extended_tests_release_3

OSX-Big-Sur_Safari-14.0-visual-regression-tests-styling:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    OS: OS X
    OS_VERSION: Big Sur
    BROWSER: Safari
    BROWSER_VERSION: '14.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: visual_regression_styling_safari
  resource_group: extended_tests_release_4

SamsungGalaxyS20-10.0_Chrome-component-smoke-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S20
    OS_VERSION: '10.0'
    REAL_MOBILE: 'true'
    BROWSERSTACK_APPIUM_VERSION: '1.18.0'
    POETRY_TAGS: $SMOKE_TESTS_TAG
  resource_group: extended_tests_release_1

SamsungGalaxyS6-5.0_Chrome-browser-not-supported-component-tests:
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: Samsung Galaxy S6
    OS_VERSION: '5.0'
    REAL_MOBILE: 'true'
    POETRY_TAGS: browser_info_not_supported
  resource_group: extended_tests_release_2

.iPhoneXR-12_Safari-full-part-1-component-tests: # TODO https://securetrading.atlassian.net/browse/STJS-661
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone XR
    OS_VERSION: 12
    BROWSER: Safari
    REAL_MOBILE: 'true'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: full_test_part_1
  resource_group: extended_tests_release_1

.iPhoneXR-12_Safari-full-part-2-component-tests: # TODO https://securetrading.atlassian.net/browse/STJS-661
  extends:
    - .extended-tests-browserstack
    - .rules-extended-tests-release
  variables:
    DEVICE: iPhone XR
    OS_VERSION: 12
    BROWSER: Safari
    REAL_MOBILE: 'true'
    AUTOMATION_TIMEOUT: 120
    POETRY_TAGS: full_test_part_2
  resource_group: extended_tests_release_2


win10_IE-11.0-visual-regression-tests:
  extends:
    - .visual-regression-tests
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: IE
    BROWSER_VERSION: '11.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    POETRY_TAGS: visual_regression
  resource_group: extended_tests_release_3

win10_IE-11.0-visual-regression-tests-styling:
  extends:
    - .visual-regression-tests
    - .rules-extended-tests-release
  variables:
    OS: Windows
    OS_VERSION: 10
    BROWSER: IE
    BROWSER_VERSION: '11.0'
    BROWSERSTACK_SELENIUM_VERSION: '3.141.59'
    POETRY_TAGS: visual_regression_styling
  resource_group: extended_tests_release_4
