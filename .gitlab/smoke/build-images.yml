validate-cdn-latest-js-payments-v3-url:
  extends:
    - .validate-file-in-cdn-with-target
    - .rules-when-release
  stage: smoke-build-images
  variables:
      SLEEP_BEFORE_VALIDATE: '0'
      REMOTE_FILE_URL: "https://cdn.eu.trustpayments.com/js-payments-v3/latest/st.js"
      TARGET_FILE_PATH: ".artifacts_sdk_release/dist/st.js"

validate-cdn-latest-eu:
  extends:
    - .validate-file-in-cdn-with-target
    - .rules-when-release
  stage: smoke-build-images
  variables:
      SLEEP_BEFORE_VALIDATE: '0'
      REMOTE_FILE_URL: "https://cdn.eu.trustpayments.com/js/latest/st.js"
      TARGET_FILE_PATH: ".artifacts_sdk_release/dist/st.js"

validate-cdn-latest-us:
  extends:
    - .validate-file-in-cdn-with-target
    - .rules-when-release
  stage: smoke-build-images
  variables:
      SLEEP_BEFORE_VALIDATE: '0'
      REMOTE_FILE_URL: "https://cdn.us.trustpayments.com/js/latest/st.js"
      TARGET_FILE_PATH: ".artifacts_sdk_release/dist/st.js"

build-app-image-html-smoke-eu:
  extends:
    - .build-app-image-html
    - .rules-when-release
  stage: smoke-build-images
  variables:
    ARTIFACTS_BUILD_PATH: "${CI_PROJECT_DIR}/.artifacts_app_html_smoke_eu_image"
    BUILD_ARGS_EXTRA: "--build-arg SDK_DIST_PATH=.artifacts_sdk_release/dist --build-arg APP_DIST_PATH=.artifacts_app_html_smoke_eu/dist"
    UTILITY_NAME: 'app-html-smoke-eu'

build-app-image-html-smoke-us:
  extends:
    - .build-app-image-html
    - .rules-when-release
  stage: smoke-build-images
  variables:
    ARTIFACTS_BUILD_PATH: "${CI_PROJECT_DIR}/.artifacts_app_html_smoke_us_image"
    BUILD_ARGS_EXTRA: "--build-arg SDK_DIST_PATH=.artifacts_sdk_release/dist --build-arg APP_DIST_PATH=.artifacts_app_html_smoke_us/dist"
    UTILITY_NAME: 'app-html-smoke-us'
