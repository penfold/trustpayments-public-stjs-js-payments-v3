.cicd-os-ref: &cicd-os-ref INFRA-225-Headless_Component_Tests

.cicd-os: &cicd-os
  project: trustpayments-public/stjs/cicd-os
  ref: *cicd-os-ref

include:
  - file: /cicd_template.yml
    <<: *cicd-os

  - local: '/.gitlab/build.yml'
  - local: '/.gitlab/fast-tests.yml'

variables:
  CICD_OS_REF: *cicd-os-ref

  IMAGE_JS_PAYMENTS_APP_HTML_TEST: ${CI_REGISTRY_IMAGE}/app-html-test:${CI_COMMIT_REF_SLUG}
  IMAGE_JS_PAYMENTS_TESTS: ${CI_REGISTRY_IMAGE}/payments-tests:${CI_COMMIT_REF_SLUG}
  IMAGE_JS_PAYMENTS_WIREMOCK: ${CI_REGISTRY_IMAGE}/wiremock:${CI_COMMIT_REF_SLUG}

  ### Disabled Jobs:
  # Initialize
  # DISABLE_JOB_copy_cicd_scripts: 'true'
  # Docker-init
  # DISABLE_JOB_docker_init: 'true' # TODO INFRA-264
  # Pre-build
  # DISABLE_JOB_docker_images_build: 'true'
  # DISABLE_JOB_docker_images_pull: 'true'
  # Build
  # service-images-build - No need to disabling. Extends to enable.
  # Fast Tests
  # DISABLE_JOB_unit_tests: 'true'
  ### Disabled Jobs : End

  ### Disabled Activities
  # DISABLE_ACTIVITY_docker_image_build_cache: 'true'
  ### Disabled Activities : End

  ##### Others - project specific #####
  # BUILD_IMAGES: "true"
  # CI_DEBUG_TRACE: "true" # For CI/CD extra logs (like actually using variables)
  # LOG_LEVEL: DEBUG # For bash and python scripts

stages:
  - initialize
  - docker-init # TODO INFRA-264
  - pre-build
  - build
  - fast-tests
